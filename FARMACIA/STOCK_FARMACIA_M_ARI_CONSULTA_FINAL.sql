use SIGSALUD
select  * from INGRESOC where TIPO_TRANSACCION = 'ICO' AND FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) AND CONVERT(DATETIME, '2017-12-31', 101)

/* los primeros datos */
select INGRESOID, DOCUMENTO, OBSERVACION AS FUENTE_DE_FINANCIAMIENTO, MODALIDAD_COMPRA, PPA, CONVERT(varchar(10), fecha, 103) as fecha_ingreso
FROM INGRESOC where TIPO_TRANSACCION = 'ICO' AND FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) AND CONVERT(DATETIME, '2017-12-31', 101)
order by FECHA 

/* obtengo lote */
select ITEM, IDTRANSACCION, PRECIO as precio_costo, LOTE, convert(varchar(10), fecha_vencimiento, 103) as fecha_ven from KARDEX where FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) + CAST('00:00:00' AS DATETIME)
AND CONVERT(DATETIME, '2017-12-31', 101) + CAST('23:59:59' AS DATETIME)  and IDTRANSACCION = '17000301'


/* precio de venta */
select top 1 PRECIO as precio_operacion from KARDEX where FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) + CAST('00:00:00' AS DATETIME)
AND CONVERT(DATETIME, '2017-12-31', 101) + CAST('23:59:59' AS DATETIME)  and ITEM = '171381' and ALMACEN = 'F' order by OPERACION desc

/* fecha de termino stock */
select convert(varchar(10), convert(date, fecha, 103) + CAST('00:00:00' AS DATETIME), 103)  as Fecha_termino_stock  from KARDEX where FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) + CAST('00:00:00' AS DATETIME)
AND CONVERT(DATETIME, '2017-12-31', 101) + CAST('23:59:59' AS DATETIME)  and  item = '171381'  and ALMACEN = 'A' and SALDO = 0


/* obtener sismed */
select interfase2 from ITEM where ITEM = '171381'



 
 
  select INGRESOID, FECHA, DOCUMENTO, OBSERVACION AS FUENTE_DE_FINANCIAMIENTO, MODALIDAD_COMPRA, PPA, CONVERT(varchar(10), fecha, 103) as fecha_ingreso 
    FROM INGRESOC where TIPO_TRANSACCION = 'ICO' AND FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) AND CONVERT(DATETIME, '2017-12-31', 101)
     order by FECHA 
     
     
 SELECT 'T026 - ' AS NRE,  RTRIM(REPLACE('T026 - ','-',''));



FUENTE DE FINANCIEAMIENTO : ESTA EN OBSERVACION
ADICIONAR TIPO DE FINANCIAMIENTO : FUENTE DE FINANCIAMIENTO

TIPO DE COMPRAR = MODALIDAD DE COMPRA





SELECT * FROM KARDEX WHERE IDTRANSACCION = '17000317' AND FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) + CAST('00:00:00' AS DATETIME)
AND CONVERT(DATETIME, '2017-12-31', 101) + CAST('23:59:59' AS DATETIME) AND ALMACEN IN ('A', 'F')


SELECT * FROM KARDEX WHERE  FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) + CAST('00:00:00' AS DATETIME)
AND CONVERT(DATETIME, '2017-12-31', 101) + CAST('23:59:59' AS DATETIME) AND ALMACEN IN ('A', 'F') AND ITEM = '170995'

SELECT * FROM PRECIO WHERE ITEM = '170995' AND  FECHA BETWEEN CONVERT(DATETIME, '2017-07-01', 101) AND CONVERT(DATETIME, '2017-12-31', 101)
ORDER BY IDRECORD DESC


RPECIO AL PUBLICO DE FARMACIA

FECHA DE TERMINO DE ALMACEN


SELECT *
  FROM [SIGSALUD].[dbo].[TABLA_AEM_2017] order by codigo_sismed
  
  UPDATE [SIGSALUD].[dbo].[TABLA_AEM_2017] SET NRO_LOTE = '' WHERE NRO_LOTE IS NULL
  UPDATE [SIGSALUD].[dbo].[TABLA_AEM_2017] SET FECHA_VENCIMIENTO = '' WHERE FECHA_VENCIMIENTO IS NULL 
  UPDATE [SIGSALUD].[dbo].[TABLA_AEM_2017] SET FECHA_VENCIMIENTO = '' WHERE FECHA_VENCIMIENTO = '01/01/1900'
